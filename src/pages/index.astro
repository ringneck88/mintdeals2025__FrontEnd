---
import Layout from '../layouts/Layout.astro';
import { strapi } from '../lib/strapi';

let strapiStatus = 'Not connected';
let strapiUrl = import.meta.env.PUBLIC_STRAPI_URL;

// Category icon mapping
function getCategoryIcon(slug) {
  const icons = {
    'flower': 'ðŸŒ¿',
    'pre-rolls': 'ðŸš¬',
    'vaporizers': 'ðŸ’¨',
    'concentrates': 'ðŸ¯',
    'edibles': 'ðŸ­',
    'topicals': 'ðŸ§´',
    'cartridges': 'ðŸ–Šï¸'
  };
  return icons[slug] || 'ðŸŒ¿';
}

// Initialize data arrays
let deals = [];
let stores = [];
let categories = [];
let apiError = null;

try {
  console.log('ðŸš€ Starting API data fetch');

  // Fetch all data in parallel
  const [dealsResponse, storesResponse, categoriesResponse] = await Promise.allSettled([
    strapi.getMany('/deals', { pagination: { pageSize: 6 } }),
    strapi.getMany('/stores', { pagination: { pageSize: 6 } }),
    strapi.getMany('/dosage-forms', { sort: 'Title:asc', pagination: { pageSize: 8 } })
  ]);

  strapiStatus = 'Connected';

  // Process deals
  if (dealsResponse.status === 'fulfilled' && dealsResponse.value?.data?.length > 0) {
    deals = dealsResponse.value.data.map(deal => ({
      id: deal.id,
      documentId: deal.documentId,
      title: deal.Title || deal.title || 'Special Deal',
      description: deal.Description || deal.description || 'Great savings available!',
      discount: deal.Discount || deal.discount || 'Special Pricing',
      validUntil: deal.ValidUntil || deal.valid_until || deal.validUntil,
      store: deal.store?.Name || deal.store?.Title || 'Multiple Locations',
      category: deal.Category || deal.category || 'General',
      image: deal.image?.url ? `${strapiUrl}${deal.image.url}` : 'https://images.unsplash.com/photo-1584308666744-24d5c474f2ae?w=400&h=300&fit=crop&q=80',
      publishedAt: deal.publishedAt
    })).filter(deal => deal.publishedAt);
  }

  // Process stores
  if (storesResponse.status === 'fulfilled' && storesResponse.value?.data?.length > 0) {
    stores = storesResponse.value.data.map(store => ({
      id: store.id,
      documentId: store.documentId,
      name: store.Name || store.title || 'Dispensary',
      address: store.Address?.Street || store.Address || store.address || 'Address not available',
      city: store.Address?.City || store.City || store.city || '',
      state: store.Address?.State || store.State || store.state || 'FL',
      phone: store.Phone || store.phone || '',
      hours: store.Hours || store.hours || 'Call for hours',
      slug: store.Slug || store.slug || store.documentId,
      image: store.image?.url ? `${strapiUrl}${store.image.url}` : 'https://images.unsplash.com/photo-1586864387967-d02ef85d93e8?w=400&h=300&fit=crop&q=80',
      publishedAt: store.publishedAt
    })).filter(store => store.publishedAt);
  }

  // Process categories
  if (categoriesResponse.status === 'fulfilled' && categoriesResponse.value?.data?.length > 0) {
    categories = categoriesResponse.value.data.map(category => ({
      id: category.id,
      documentId: category.documentId,
      title: category.Title || category.title || 'Category',
      description: category.Description || category.description || 'Cannabis product category',
      slug: category.SEO_Title_Slug || category.slug || category.documentId,
      icon: getCategoryIcon(category.SEO_Title_Slug),
      publishedAt: category.publishedAt
    })).filter(category => category.publishedAt);
  }
} catch (error) {
  console.log('ðŸ’¥ DEBUG: Error occurred:', error);
  strapiStatus = 'Disconnected - Cannot connect to backend';
  apiError = error.name === 'AbortError' ? 'Connection timeout' : error.message;

  // No fallback data - only show content from database
  deals = [];
  stores = [];
  categories = [];
}
---

<Layout title="FLMintDeals - Cannabis Deals in Florida" description="Find the best cannabis deals and dispensary locations across Florida. Your trusted source for cannabis savings.">
  <!-- Hero Section -->
  <div id="hero" class="relative min-h-[600px] flex items-center justify-center overflow-hidden">
    <!-- Modern animated gradient background -->
    <div class="absolute inset-0 bg-gradient-to-br from-emerald-900 via-teal-800 to-cyan-900 opacity-90">
      <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"></div>
    </div>

    <!-- Animated mesh gradient overlay -->
    <div class="absolute inset-0 opacity-30">
      <div class="absolute inset-0 bg-[radial-gradient(circle_at_20%_80%,rgba(120,119,198,0.3),transparent_50%),radial-gradient(circle_at_80%_20%,rgba(255,119,198,0.3),transparent_50%),radial-gradient(circle_at_40%_40%,rgba(255,219,112,0.2),transparent_50%)] animate-gradient"></div>
    </div>

    <!-- Floating particles effect -->
    <div class="absolute inset-0 overflow-hidden">
      <div class="particle particle-1"></div>
      <div class="particle particle-2"></div>
      <div class="particle particle-3"></div>
      <div class="particle particle-4"></div>
    </div>

    <div class="relative z-10 px-4 py-16 sm:px-6 lg:px-8 max-w-7xl mx-auto w-full">
      <div class="text-center">
        <!-- Logo with subtle animation -->
        <div class="mb-8 animate-float">
          <div class="flex items-center justify-center">
            <div class="bg-gradient-to-br from-green-500 to-emerald-600 rounded-full p-4">
              <svg class="w-16 h-16 sm:w-20 sm:h-20 lg:w-24 lg:h-24 text-white" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5z"/>
              </svg>
            </div>
          </div>
        </div>

        <!-- Main heading with gradient text -->
        <h1 class="text-5xl sm:text-6xl lg:text-7xl font-black mb-6">
          <span class="bg-gradient-to-r from-white via-emerald-100 to-cyan-100 bg-clip-text text-transparent">
            Florida's Premier
          </span>
          <br />
          <span class="text-white">
            Cannabis Marketplace
          </span>
        </h1>

        <p class="mt-6 text-xl lg:text-2xl text-emerald-50 max-w-3xl mx-auto leading-relaxed">
          Exclusive deals, trusted dispensaries, and expert guidance all in one place
        </p>

        <!-- Modern CTA buttons -->
        <div class="mt-10 flex flex-col sm:flex-row gap-4 justify-center">
          <a href="#deals" class="group relative inline-flex items-center justify-center px-8 py-4 text-lg font-bold text-gray-900 bg-gradient-to-r from-emerald-400 to-cyan-400 rounded-full overflow-hidden shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300">
            <span class="relative z-10 flex items-center">
              <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
              </svg>
              Browse Hot Deals
            </span>
            <div class="absolute inset-0 bg-gradient-to-r from-cyan-400 to-emerald-400 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
          </a>

          <a href="/stores" class="group relative inline-flex items-center justify-center px-8 py-4 text-lg font-bold text-white border-2 border-white/50 rounded-full backdrop-blur-sm hover:bg-white/10 transform hover:scale-105 transition-all duration-300">
            <span class="flex items-center">
              <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
              </svg>
              Find Locations
            </span>
          </a>
        </div>

        <!-- Trust indicators -->
        <div class="mt-16 flex flex-wrap justify-center gap-8 text-white/80">
          <div class="flex items-center">
            <svg class="w-5 h-5 mr-2 text-emerald-400" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
            </svg>
            <span class="text-sm font-medium">Verified Dispensaries</span>
          </div>
          <div class="flex items-center">
            <svg class="w-5 h-5 mr-2 text-emerald-400" fill="currentColor" viewBox="0 0 20 20">
              <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
              <path fill-rule="evenodd" d="M4 5a2 2 0 012-2 1 1 0 000 2H6a2 2 0 100 4h2a2 2 0 100 4h2a1 1 0 100 2 2 2 0 01-2 2H4a2 2 0 01-2-2V7a2 2 0 012-2z" clip-rule="evenodd"></path>
            </svg>
            <span class="text-sm font-medium">Daily Updated Deals</span>
          </div>
          <div class="flex items-center">
            <svg class="w-5 h-5 mr-2 text-emerald-400" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
            </svg>
            <span class="text-sm font-medium">Safe & Legal</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Scroll indicator -->
    <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce">
      <svg class="w-6 h-6 text-white/60" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
      </svg>
    </div>
  </div>

  <!-- Current Deals Section -->
  <div id="deals" class="py-20 bg-gradient-to-b from-gray-50 to-white dark:from-gray-900 dark:to-gray-800">
    <div class="px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
        <span class="inline-block px-4 py-1 mb-4 text-sm font-semibold text-emerald-700 bg-emerald-100 rounded-full dark:text-emerald-300 dark:bg-emerald-900/30">
          LIMITED TIME OFFERS
        </span>
        <h2 class="text-4xl sm:text-5xl font-black text-gray-900 dark:text-white mb-4">
          Today's <span class="text-gradient">Hottest Deals</span>
        </h2>
        <p class="text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto">
          Save big on premium cannabis products from trusted Florida dispensaries
        </p>
      </div>

      {deals.length > 0 ? (
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-7xl mx-auto">
          {deals.map(deal => (
            <div class="group relative bg-white dark:bg-gray-800 rounded-2xl overflow-hidden hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300">
              <!-- Deal badge -->
              <div class="absolute top-4 left-4 z-10">
                <span class="inline-flex items-center px-3 py-1 bg-red-500 text-white text-sm font-bold rounded-full shadow-lg">
                  <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z" clip-rule="evenodd"></path>
                  </svg>
                  {deal.discount}
                </span>
              </div>

              <!-- Image container with overlay -->
              <div class="relative h-56 overflow-hidden">
                <img
                  src={deal.image}
                  alt={deal.title}
                  class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500"
                />
                <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
              </div>

              <!-- Content -->
              <div class="p-6">
                <div class="flex items-center mb-3">
                  <span class="px-2 py-1 text-xs font-medium text-emerald-700 bg-emerald-100 rounded-full dark:text-emerald-300 dark:bg-emerald-900/30">
                    {deal.category}
                  </span>
                  {deal.validUntil && (
                    <span class="ml-auto flex items-center text-xs text-gray-500 dark:text-gray-400">
                      <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                      </svg>
                      {new Date(deal.validUntil).toLocaleDateString()}
                    </span>
                  )}
                </div>

                <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2 group-hover:text-emerald-600 dark:group-hover:text-emerald-400 transition-colors">
                  {deal.title}
                </h3>

                <p class="text-gray-600 dark:text-gray-300 text-sm line-clamp-2 mb-4">
                  {deal.description}
                </p>

                <!-- Store info with action -->
                <div class="flex items-center justify-between pt-4 border-t border-gray-100 dark:border-gray-700">
                  <div class="flex items-center text-sm text-gray-500 dark:text-gray-400">
                    <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    </svg>
                    <span>{deal.store}</span>
                  </div>
                  <button class="text-emerald-600 hover:text-emerald-700 font-medium text-sm flex items-center group/btn">
                    View Deal
                    <svg class="w-4 h-4 ml-1 transform group-hover/btn:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          ))}
        </div>
      ) : (
        <div class="text-center py-12">
          <div class="bg-gray-100 dark:bg-gray-800 rounded-lg p-8 max-w-md mx-auto">
            <svg class="w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"></path>
            </svg>
            <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-2">No Deals Available</h3>
            <p class="text-gray-600 dark:text-gray-300">Check back soon for new deals and promotions!</p>
          </div>
        </div>
      )}
    </div>
  </div>

  <!-- Cannabis Categories Section -->
  <div class="py-20 bg-white dark:bg-gray-900">
    <div class="px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
        <span class="inline-block px-4 py-1 mb-4 text-sm font-semibold text-purple-700 bg-purple-100 rounded-full dark:text-purple-300 dark:bg-purple-900/30">
          LEARN & EXPLORE
        </span>
        <h2 class="text-4xl sm:text-5xl font-black text-gray-900 dark:text-white mb-4">
          Cannabis <span class="text-gradient-purple">Education Hub</span>
        </h2>
        <p class="text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto">
          Your comprehensive guide to cannabis products, effects, and safe consumption
        </p>
      </div>

      {categories.length > 0 ? (
        <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-4 gap-6 max-w-6xl mx-auto">
          {categories.slice(0, 8).map(category => (
            <a href={`/learn/${category.slug}`} class="group relative bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 rounded-2xl p-8 shadow-lg hover:shadow-2xl transform hover:-translate-y-2 transition-all duration-300 overflow-hidden">
              <!-- Gradient overlay on hover -->
              <div class="absolute inset-0 bg-gradient-to-br from-purple-600/10 to-pink-600/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>

              <!-- Icon container -->
              <div class="relative mb-4">
                <div class="w-16 h-16 mx-auto bg-gradient-to-br from-purple-100 to-pink-100 dark:from-purple-900/50 dark:to-pink-900/50 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300">
                  <span class="text-3xl">{category.icon}</span>
                </div>
              </div>

              <h3 class="relative text-lg font-bold text-gray-900 dark:text-white mb-2 group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors duration-300">
                {category.title}
              </h3>

              <p class="relative text-sm text-gray-600 dark:text-gray-400 line-clamp-2 mb-4">
                {category.description}
              </p>

              <div class="relative flex items-center justify-center text-sm font-medium text-purple-600 dark:text-purple-400 group-hover:text-purple-700 dark:group-hover:text-purple-300">
                <span>Explore</span>
                <svg class="w-4 h-4 ml-1 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
              </div>
            </a>
          ))}
        </div>
      ) : (
        <div class="text-center py-12">
          <div class="bg-white/80 dark:bg-gray-700/80 backdrop-blur-sm rounded-2xl p-8 max-w-md mx-auto border border-emerald-200/50 dark:border-emerald-700/50">
            <div class="text-6xl mb-4">ðŸŒ¿</div>
            <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-2">Educational Content Coming Soon</h3>
            <p class="text-gray-600 dark:text-gray-300">Cannabis education resources will be available here.</p>
          </div>
        </div>
      )}

      <div class="text-center mt-12">
        <a href="/categories" class="group inline-flex items-center px-8 py-4 text-lg font-bold text-purple-600 bg-purple-100 rounded-full hover:bg-purple-600 hover:text-white transform hover:scale-105 transition-all duration-300">
          <span>View All Categories</span>
          <svg class="w-5 h-5 ml-2 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
          </svg>
        </a>
      </div>
    </div>
  </div>

  <!-- Featured Stores Section -->
  <div class="py-20 bg-gradient-to-b from-gray-50 to-white dark:from-gray-800 dark:to-gray-900">
    <div class="px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
        <span class="inline-block px-4 py-1 mb-4 text-sm font-semibold text-blue-700 bg-blue-100 rounded-full dark:text-blue-300 dark:bg-blue-900/30">
          TRUSTED PARTNERS
        </span>
        <h2 class="text-4xl sm:text-5xl font-black text-gray-900 dark:text-white mb-4">
          Featured <span class="text-gradient-blue">Dispensaries</span>
        </h2>
        <p class="text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto">
          Visit Florida's most trusted cannabis retailers
        </p>
      </div>

      {stores.length > 0 ? (
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-7xl mx-auto">
          {stores.slice(0, 4).map(store => (
            <div class="group bg-white dark:bg-gray-800 rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300">
              <!-- Image with overlay -->
              <div class="relative h-48 overflow-hidden">
                <img
                  src={store.image}
                  alt={store.name}
                  class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500"
                />
                <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"></div>
                <div class="absolute bottom-4 left-4">
                  <h3 class="text-xl font-bold text-white mb-1">{store.name}</h3>
                  <div class="flex items-center text-white/90 text-sm">
                    <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                    </svg>
                    <span>{store.city}, {store.state}</span>
                  </div>
                </div>
              </div>

              <!-- Content -->
              <div class="p-6">
                <div class="space-y-3 mb-4">
                  <div class="flex items-start">
                    <svg class="w-5 h-5 text-gray-400 mr-3 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                    </svg>
                    <span class="text-sm text-gray-600 dark:text-gray-300">{store.address}</span>
                  </div>

                  {store.phone && (
                    <div class="flex items-center">
                      <svg class="w-5 h-5 text-gray-400 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                      </svg>
                      <span class="text-sm text-gray-600 dark:text-gray-300">{store.phone}</span>
                    </div>
                  )}

                  <div class="flex items-center">
                    <svg class="w-5 h-5 text-gray-400 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <span class="text-sm text-gray-600 dark:text-gray-300">{store.hours}</span>
                  </div>
                </div>

                <!-- Action button -->
                <button class="w-full py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium rounded-xl hover:from-blue-600 hover:to-blue-700 transform hover:scale-105 transition-all duration-300">
                  View Details
                </button>
              </div>
            </div>
          ))}
        </div>
      ) : (
        <div class="text-center py-12">
          <p class="text-gray-600 dark:text-gray-300">Store information will be displayed here.</p>
        </div>
      )}

      <div class="text-center mt-12">
        <a href="/stores" class="group inline-flex items-center px-8 py-4 text-lg font-bold text-white bg-gradient-to-r from-blue-500 to-blue-600 rounded-full hover:from-blue-600 hover:to-blue-700 shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300">
          <span>Browse All Locations</span>
          <svg class="w-5 h-5 ml-2 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
          </svg>
        </a>
      </div>
    </div>
  </div>

  <!-- About Section -->
  <div id="about" class="py-24 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 relative overflow-hidden">
    <!-- Decorative elements -->
    <div class="absolute inset-0">
      <div class="absolute top-0 left-0 w-96 h-96 bg-emerald-500/10 rounded-full blur-3xl"></div>
      <div class="absolute bottom-0 right-0 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl"></div>
    </div>

    <div class="relative px-4 sm:px-6 lg:px-8">
      <div class="max-w-6xl mx-auto">
        <div class="text-center mb-16">
          <span class="inline-block px-4 py-1 mb-4 text-sm font-semibold text-emerald-300 bg-emerald-900/30 rounded-full">
            WHY CHOOSE US
          </span>
          <h2 class="text-4xl sm:text-5xl font-black text-white mb-4">
            The <span class="text-gradient">FLMintDeals</span> Advantage
          </h2>
          <p class="text-xl text-gray-300 max-w-2xl mx-auto">
            Your trusted partner in the Florida cannabis community
          </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
          <!-- Feature 1 -->
          <div class="group relative bg-white/5 backdrop-blur-sm rounded-3xl p-8 hover:bg-white/10 transition-all duration-300">
            <div class="absolute inset-0 bg-gradient-to-br from-emerald-500/20 to-transparent opacity-0 group-hover:opacity-100 rounded-3xl transition-opacity duration-300"></div>

            <div class="relative">
              <div class="w-20 h-20 mb-6 bg-gradient-to-br from-emerald-400 to-emerald-600 rounded-2xl flex items-center justify-center shadow-2xl group-hover:scale-110 transition-transform duration-300">
                <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
                </svg>
              </div>
              <h3 class="text-2xl font-bold text-white mb-3">Exclusive Savings</h3>
              <p class="text-gray-300 leading-relaxed">
                Access member-only deals and save up to 40% on premium cannabis products from top Florida dispensaries.
              </p>
            </div>
          </div>

          <!-- Feature 2 -->
          <div class="group relative bg-white/5 backdrop-blur-sm rounded-3xl p-8 hover:bg-white/10 transition-all duration-300">
            <div class="absolute inset-0 bg-gradient-to-br from-blue-500/20 to-transparent opacity-0 group-hover:opacity-100 rounded-3xl transition-opacity duration-300"></div>

            <div class="relative">
              <div class="w-20 h-20 mb-6 bg-gradient-to-br from-blue-400 to-blue-600 rounded-2xl flex items-center justify-center shadow-2xl group-hover:scale-110 transition-transform duration-300">
                <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"></path>
                </svg>
              </div>
              <h3 class="text-2xl font-bold text-white mb-3">Smart Discovery</h3>
              <p class="text-gray-300 leading-relaxed">
                Find dispensaries near you with real-time inventory, verified reviews, and personalized recommendations.
              </p>
            </div>
          </div>

          <!-- Feature 3 -->
          <div class="group relative bg-white/5 backdrop-blur-sm rounded-3xl p-8 hover:bg-white/10 transition-all duration-300">
            <div class="absolute inset-0 bg-gradient-to-br from-purple-500/20 to-transparent opacity-0 group-hover:opacity-100 rounded-3xl transition-opacity duration-300"></div>

            <div class="relative">
              <div class="w-20 h-20 mb-6 bg-gradient-to-br from-purple-400 to-purple-600 rounded-2xl flex items-center justify-center shadow-2xl group-hover:scale-110 transition-transform duration-300">
                <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                </svg>
              </div>
              <h3 class="text-2xl font-bold text-white mb-3">Expert Education</h3>
              <p class="text-gray-300 leading-relaxed">
                Learn from comprehensive guides, dosage calculators, and expert advice to make informed decisions.
              </p>
            </div>
          </div>
        </div>

        <!-- Stats -->
        <div class="mt-20 grid grid-cols-2 md:grid-cols-4 gap-8 text-center">
          <div>
            <div class="text-4xl font-black text-emerald-400 mb-2">500+</div>
            <div class="text-gray-400">Partner Stores</div>
          </div>
          <div>
            <div class="text-4xl font-black text-blue-400 mb-2">10K+</div>
            <div class="text-gray-400">Active Users</div>
          </div>
          <div>
            <div class="text-4xl font-black text-purple-400 mb-2">$2M+</div>
            <div class="text-gray-400">Saved by Members</div>
          </div>
          <div>
            <div class="text-4xl font-black text-pink-400 mb-2">4.8â˜…</div>
            <div class="text-gray-400">User Rating</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</Layout>

<style>
  /* Line clamp utility */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Gradient text effects */
  .text-gradient {
    background: linear-gradient(135deg, #10b981 0%, #06b6d4 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .text-gradient-purple {
    background: linear-gradient(135deg, #a855f7 0%, #ec4899 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .text-gradient-blue {
    background: linear-gradient(135deg, #3b82f6 0%, #06b6d4 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* Floating animation */
  @keyframes float {
    0%, 100% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-10px);
    }
  }

  .animate-float {
    animation: float 3s ease-in-out infinite;
  }

  /* Gradient animation */
  @keyframes gradient {
    0%, 100% {
      transform: translateX(0%) translateY(0%) rotate(0deg);
    }
    25% {
      transform: translateX(10%) translateY(-10%) rotate(1deg);
    }
    50% {
      transform: translateX(-5%) translateY(5%) rotate(-1deg);
    }
    75% {
      transform: translateX(5%) translateY(-5%) rotate(1deg);
    }
  }

  .animate-gradient {
    animation: gradient 20s ease infinite;
  }

  /* Floating particles */
  .particle {
    position: absolute;
    width: 4px;
    height: 4px;
    background: rgba(255, 255, 255, 0.5);
    border-radius: 50%;
    animation: float-particle 20s infinite;
  }

  .particle-1 {
    left: 10%;
    top: 100vh;
    animation-delay: 0s;
    animation-duration: 25s;
  }

  .particle-2 {
    left: 30%;
    top: 100vh;
    animation-delay: 5s;
    animation-duration: 30s;
  }

  .particle-3 {
    left: 60%;
    top: 100vh;
    animation-delay: 10s;
    animation-duration: 28s;
  }

  .particle-4 {
    left: 85%;
    top: 100vh;
    animation-delay: 15s;
    animation-duration: 22s;
  }

  @keyframes float-particle {
    0% {
      transform: translateY(0) translateX(0);
      opacity: 0;
    }
    10% {
      opacity: 1;
    }
    90% {
      opacity: 1;
    }
    100% {
      transform: translateY(-110vh) translateX(100px);
      opacity: 0;
    }
  }

  /* Fade in animation */
  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in {
    animation: fade-in 0.6s ease-out forwards;
  }

  /* Smooth transitions */
  * {
    transition: transform 0.3s ease, opacity 0.3s ease, background-color 0.3s ease, color 0.3s ease;
  }

  /* Additional modern effects */
  .glass-effect {
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  /* Button hover effects */
  .btn-modern:hover {
    transform: translateY(-2px);
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Smooth scroll for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });

    // Intersection Observer for fade-in animations
    const observerOptions = {
      threshold: 0.1,
      rootMargin: '0px 0px -100px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('animate-fade-in');
          observer.unobserve(entry.target);
        }
      });
    }, observerOptions);

    // Observe all sections
    document.querySelectorAll('section, .grid > div').forEach(el => {
      observer.observe(el);
    });
  });
</script>